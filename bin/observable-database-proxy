#!/usr/bin/env node

require = require("esm")(module);

require("yargs")
  .usage(`Usage: observable-database-proxy <name> [options]`)
  .describe(`reset`, `Reset an existing database proxy configuration`)
  .describe(
    `sslcert`,
    `Set the SSL certificate location for an HTTPS database proxy`
  )
  .describe(
    `sslkey`,
    `Set the SSL private key location for an HTTPS database proxy`
  )
  .example(
    `observable-database-proxy localdb`,
    `Configure or run an HTTP database proxy named "localdb"`
  )
  .example(
    `observable-database-proxy localssl --sslkey ../ssl/localhost.key --sslcert ../ssl/localhost.crt`,
    `Configure or run an HTTPS database proxy named "localssl"`
  );

const getConfig = require("../lib/config").default;
const server = require("../lib/server").default;

getConfig().then(server);
